@(implicit request: RequestHeader)

@main("Twitter stream analytics") {
<script type="text/javascript">
    $(function() {
   	  var ws = new WebSocket("@routes.Application.socket.webSocketURL()");
	  ws.onmessage = function(event) {
	    var msg = event.data
	    var json = JSON.parse(msg)
	    var dataType = json.type
	    alert("dataType is " + dataType)

	    switch (dataType) {
	      case "popularHashtagSoFar":
            var value = json.pairs[0].key + " " + json.pairs[0].count
            $('#most-popular').text(value)
            break;
	    }

	    //$('#most-popular').text(msg)
      }
      ws.onerror = function() {
        alert("get error from back end, check the log")
      }
    })
  </script>
<h1>Top 10 popular: <span id="most-popular"></span></h1>
}